#!/bin/sh

set -e

if [ $# -ne 1 ]; then
	echo "Usage: $0 <mp3file>"
	exit 1
fi

SONG=$1
INFO=$(mid3v2 "$SONG")
TITLE=$(echo "$INFO" | grep TIT2 | cut -d= -f2)
ARTIST=$(echo "$INFO" | grep TPE1 | cut -d= -f2)
ALBUM=$(echo "$INFO" | grep TALB | cut -d= -f2)

read -r -p "Title [$TITLE]: " TITLE
read -r -p "Artist [$ARTIST]: " ARTIST
read -r -p "Album [$ALBUM]: " ALBUM

mid3v2 --album="$ALBUM" --artist="$ARTIST" --song="$TITLE" "$SONG"
